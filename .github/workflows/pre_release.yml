# This workflow will public Cocoapods and Docs

name: 🆕 Pre Release
on:
  workflow_dispatch:
    inputs:
      sdkVersion:
        description: 'Define the version of the SDK'
        required: true
  push:
    branches:
      - 'pre-release-workflow'
    

jobs:
  generate-release-notes:
    name: 📝 Generate Release Notes
    uses: generate-release-notes: ./.github/workflows/get_release_notes.yml
    
  pre-release:
    name: 🎬 Pre-Release
    runs-on: macos-latest
    needs: generate-release-notes
    
    steps:
      - name: 🆕 Create Pull Request
        uses: peter-evans/create-pull-request@v6
        with:
          delete-branch: true
          branch: pre-release
          commit-message: "pre-release: ${{ github.event.inputs.sdkVersion }}"
          title: Pre Release Tasks
          body: ${{ jobs.generate-release-notes.outputs.notes }}
          token: ${{ secrets.GITHUB_TOKEN }}
